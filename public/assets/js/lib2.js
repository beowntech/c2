(function(){var o,g,a,t,r,e,s,n,v,l,C,c,b,w,y,S,k,d,u,m,p,f,_,x,L,I,P,j,h,O,T,D,A,N,E,B,J,G,U,F,V,M,q,z,H,R,Z,K,Q,W,X,Y,ee,oe
t=[],r=function(e){return!!t.includes(e)||(t.push(e),!1)},e={loadCSS:function(e){if(!r(e)){var o=document.createElement("link")
o.href=e,o.rel="stylesheet",document.body.append(o)}}},this.Dynamic=e,_addChatFrame=function(){$(".chatIconDiv").addClass("openChat"),$("#chatButton").hide(),IsMobile?$('<iframe src="/dialogs/?framed=yes"  style="position:fixed; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0;" frameborder="0" scrolling="no" id="myCounsellorBot"></iframe>').appendTo("#chatdiv"):$('<iframe src="/dialogs/?framed=yes"  width="425px" height="625px" frameborder="0" scrolling="no" id="myCounsellorBot" style="border-radius:7px;"></iframe>').appendTo("#chatdiv"),$("body").addClass("overflow")},closeIframe=function(){var e=document.getElementById("myCounsellorBot")
e.parentNode.removeChild(e),$(".chatIconDiv").removeClass("openChat"),$("#chatButton").show(),$("body").removeClass("overflow")},getCookie=function(e){var o="; "+document.cookie,t=o.split("; "+e+"=")
if(2==t.length)return t.pop().split(";").shift()},createStateCookie=function(){getCookie("state_id")||$.ajax({url:"/get_state_id"})},check_validity=function(){var e,o=document.getElementById("id_name_signup").value,t=document.getElementById("id_email_signup").value,a=document.getElementById("id_phone_signup").value,r=document.getElementById("id_preferred_stream_signup").value,s=document.getElementById("id_preferred_state_signup").value,n=document.getElementById("id_preferred_level_signup").value,i=document.getElementById("id_board_signup").value,l=document.getElementById("password_signup").value,c="Enter a valid name",d="Enter a valid email",u="Enter 10 digit mobile no starting with 6,7,8,9",m="Please Choose Preferred Stream",p="Please Choose Preferred Level",f="Please Choose State",g="Please Choose Board",_="Password length should be alteast 8 characters",h=/^(?!\s*$)[-a-zA-Z\s.]+$/,v=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@(.*)$/,C=/^[6-9]\d{9}$/,b=1
return $(".error.msg").html(""),$(".form-group").removeClass("error"),function(e){return h.test(e)}(o)||($("#id_name_signup").after("<p class='error msg'>"+c+"</p>"),$("#form-group_name").addClass("error"),b=0),function(e){return v.test(e)}(t)||($("#id_email_signup").after("<p class='error msg'>"+d+"</p>"),$("#form-group_email").addClass("error"),b=0),function(e){return C.test(e)}(a)||($("#id_phone_signup").after("<p class='error msg'>"+u+"</p>"),$("#form-group_phone_no").addClass("error"),b=0),(e=function(e){return/^\d+$/.test(e)})(r)||($("#id_preferred_stream_signup").after("<p class='error msg'>"+m+"</p>"),$("#form-group_stream").addClass("error"),b=0),e(s)||($("#id_preferred_state_signup").after("<p class='error msg'>"+f+"</p>"),$("#form-group_state").addClass("error"),b=0),e(n)||($("#id_preferred_level_signup").after("<p class='error msg'>"+p+"</p>"),$("#form-group_level").addClass("error"),b=0),console.log(i),e(i)||($("#id_board_signup").after("<p class='error msg'>"+g+"</p>"),$("#form-group_board").addClass("error"),b=0),0==l.length&&($("#password_signup").after("<p class='error msg'>"+_+"</p>"),$("#form-group_password").addClass("error"),b=0),0!=b},ajax_submit_signup=function(e){if(check_validity()){$("#loader").show(),e.preventDefault()
var o=$("#signup_form").serialize()
"object"==typeof GeoLocation&&(o=GeoLocation.getUpdatedData(o)),$.ajax({url:"/accounts/signup/"+SignupURL,type:"POST",data:o,success:function(e){$("#loader").hide(),e.location?(window.dataLayer=window.dataLayer||[],window.dataLayer.push({response:"Success",event:"leadSubmission"}),reloadOnSignup?window.location.href=e.location:($(".loginPage").fadeOut(400),setTimeout(function(){$(".loginPage .wrapper").removeAttr("style")},1e3),$(".loginPage").remove(),isLoggedIn=1,$("#is-logged-in").val(1))):e.html&&e.form_errors&&$("body").html(e.html),reloadOnSignup&&window.location.reload(!0)},error:function(e){$("#loader").hide()
var o=JSON.parse(e.responseText)
for(console.log("error----",o),field=Object.keys(o.form_errors),i=0;i<field.length;i++)$("#id_"+field[i]).after("<p class='error'>"+o.form_errors[field[i]]+"</p>"),$("#form-group_"+field[i]).addClass("error")}})}else e.preventDefault()},$.ajaxSetup({data:{csrfmiddlewaretoken:$("#csrf_token").val()}}),$(window).on("load",function(){$(".owl-related-news").owlCarousel({loop:!0,margin:10,autoplay:!1,dots:!1,autoplayTimeout:2e3,responsiveClass:!0,responsive:{0:{items:1,nav:!0},600:{items:3,nav:!0},1e3:{items:4,nav:!0,loop:!1}}})}),o=!1,$(document).ready(function(){$(".close-btn").click(function(){$(".nav-down").css("top","0px"),$(".corona-top").hide(),$(".corona-top").css("padding-top","0px"),$(".nav-down .nav-normal").css("top","0px")}),$(".more-less").click(function(e){var o,t,a
return e.preventDefault(),o=$(this).text(),t=$(this).data("count"),a=$(this).data("id"),$("ul#"+a+" li:gt("+t+")").toggle(),o=0<=o.toLowerCase().indexOf("less")?o.replace("less","more"):o.replace("more","less"),$(this).text(o),!1}),$(".collegesBlock ul.tabs li, .NewsArticleWidget ul.tabs li").click(function(){o=!0
var e=$(this).attr("data-tab")
$(this).parents("div.block").find("ul.tabs li").removeClass("current"),$(this).parents("div.block").find(".tab-content").removeClass("current"),$(this).addClass("current"),$("#"+e).addClass("current")}),$("ul.tabs li").click(function(){0==o&&$("ul.tabs li").click(function(){var e=$(this).attr("data-tab")
$("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(this).addClass("current"),$("#"+e).addClass("current")})}),$(".collegesBlock .tab-content li .items").click(function(){var e="https://admissionjockey.com",o=$(this).find("h5 a").attr("href")
return window.location.replace(e+o),!1})}),$(".site_search").on("input",function(e){var o,t=$.trim($(this).val())
t.length<3||(o=null,o=jQuery.ajax({data:{q:t},url:"/search/auto/v4",beforeSend:function(){null!=o&&o.abort()},success:function(e){var a="<ul>"
$(e.results).each(function(e,o){var t=o._source
a+='<li><a href="'+t.url+'">'+t.display_text+"</a> <span>"+o.object_type+"</span></li>"}),a+="</ul>",$("#autocomplete").html(a)},error:function(e){console.log(e)}}))}),$(document).on("click",".close",function(){$("#log_modal, .follow-up-form-modal").hide(),$("body").removeClass("bodyScroll")}),$(document).on("click",".commonForm .close, .commonForm .bg, .commonForm button.btn-default",function(){$(".commonForm").fadeOut(),$("body").removeClass("bodyScroll")}),$("a.interLink").click(function(){var e=$(this).attr("href")
$("html, body").animate({scrollTop:$(e).offset().top-160},1e3)}),$("#footer_form").submit(function(e){var o,t
return e.preventDefault(),o=$(this).serialize(),t="/common/lead_create_ajax_stream/",$.ajax({type:"POST",url:t,data:o,success:function(e){$("#common_modal").show(),$("#ajax_popup").html(),$("#common_moda_success_message").text(e.message),window.dataLayer=window.dataLayer||[],window.dataLayer.push({response:"Success",event:"leadSubmission",created_lead_id:e.created_lead_id})},error:function(e){window.dataLayer=window.dataLayer||[],window.dataLayer.push({response:"Failure",event:"leadSubmission",django_form_id:"",error_message:"",created_lead_id:"",new_lead_created:""})}}),!1}),$(document).on("click",".common_modal .popup-close",function(){$(".common_modal").css("display","none")}),$(".post_answer_qna").on("click",function(){if(isLoggedIn){qid=$(this).next().val(),console.log(qid)
var e=$(this).prev().val()
e&&$.ajax({type:"POST",url:"/scripts/add-answer/",data:{q_id:qid,answer_text:e},success:function(e){window.location.href=e.redirect_url,$(this).prev().val("")},error:function(e){console.log(e)}})}else reloadOnLogin=!1,reloadOnSignup=!1,qna_login=!0,get_login_modal(null,qna_login)}),pushTextInDataLayer=function(e){window.google_tag_manager["GTM-K26FMFC"].dataLayer.set("button_name",e)},$(document).on("click",".faq",function(e){e.preventDefault(),"View More"==$(this).text()?($(this).text("View Less"),$(this).siblings(".accordion1").find(".heading , .box content").css("display","block")):($(this).text("View More"),$(this).siblings(".accordion1").find(".heading").slice(5).removeClass("active"),$(this).siblings(".accordion1").find(".heading").slice(5).css("display","none"),$(this).siblings(".accordion1").find(".box.content").slice(5).css("display","none"))}),$(".menu").click(function(){$("nav ul").removeAttr("style"),$(".heading").removeClass("collaps"),$("nav ul").removeClass("second-level"),$("nav ul").removeClass("first-level"),$("nav ul").removeClass("first-level-data"),$(this).toggleClass("active"),$(this).parent().addClass("open"),$("nav > ul").toggleClass("slide"),$("body").toggleClass("overflowHide"),$("nav > .bg, nav button.close").on("click",function(){$("nav ul ul.first-level").hide(),$(".menu").removeClass("active"),$("nav > ul").removeClass("slide"),$("nav ul").removeClass("first-level"),$("nav ul").removeClass("first-level-data"),$("nav").removeClass("open"),$("body").removeClass("overflowHide"),$("nav ul").removeAttr("style")}),$(".sub-links > .more-links").on("click",function(){var e,o
$("nav ul").removeClass("first-level"),$(this).parents("ul").addClass("first-level"),$(this).siblings("ul").addClass("first-level-data"),e=$(this).text(),$(this).siblings().children(".back").text(e),o=$("nav > ul > li > ul").height(),$(".sub-links .first-level-data .more-links").on("click",function(){$("nav ul.slide").addClass("second-level"),$(this).siblings("ul").addClass("second-level"),$(this).siblings("ul").css({"min-height":o})
var e=$(this).text()
$(this).siblings().children(".go-back").text(e),$(".second-level > li > div.heading").off().on("click",function(e){e.preventDefault(),$(this).hasClass("collaps")?($(this).next("ul").slideDown(),$(this).removeClass("collaps")):($(this).next("ul").slideUp(),$(this).addClass("collaps"))})})}),$(".back").on("click",function(){$(this).parent("ul").removeClass("first-level-data")}),$(".go-back").on("click",function(){$(this).parents("ul").removeClass("second-level")})}),$("nav ul > li > ul > li > .more-links").hover(function(){$(this).parent().siblings().removeClass("active"),$(this).parent().addClass("active")}),globalSearchClicked=!1,showGlobalSearch=function(){globalSearchClicked=!0,$("#autocomplete").html(""),$(".searchContent").slideToggle(500),IsMobile&&$("body").addClass("overflowHide"),$("#site_search").val(""),$("#site_search").focus()},hideGlobalSearch=function(){globalSearchClicked=!1,$("#autocomplete").html(""),$(".searchContent").slideUp(300),$("body").removeClass("overflowHide")},$(document).click(function(e){globalSearchClicked&&"site_search_home"!=e.target.id&&0===$(e.target).parents(".searchContent").length&&hideGlobalSearch()}),$(".searchIcon").click(function(e){e.stopPropagation(),showGlobalSearch()}),$(".searchContent .close").click(function(){hideGlobalSearch()}),$(document).ready(function(){$(".gtm-submit-btn").click(function(){ga("send","event","config lead submit",$(this).data("button-id"),"submit",$(this).text())}),$(".gtm-lead-click").click(function(){var e=$.trim($(this).text())
pushTextInDataLayer(e),ga("send","event","button config click",$(this).attr("id"),"click",$(this).text())})}),pushToGA=function(e,o,t,a,r){ga("send",e,t+"_"+a,r)},$(".footer-logo").click(function(){window.location.href="{{url('home_page')}}"}),n=/^(?!\s*$)[-a-zA-Z\s.]+$/,l=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@(.*)$/,c=/^[6-9]\d{9}$/,w="Please Choose Preferred Stream",y="Please Choose Preferred Level",S="Please Choose State",k="Please Choose Board",d="error",u=["#form-group_name","#form-group_email","#form-group_phone","#form-group_stream","#form-group_pref_level","#form-group_state"],m=function(e){s=e.cta,console.log("ID",s),"object"==typeof GeoLocation&&GeoLocation.updateUserID(e),$("#popup-body").html(""),$(".commomFormCustom").addClass("submitMsg"),G()},f=function(e){m(e),console.log("action",e.action)
var o=N[e.action](e)
!1!==o&&(o=!1,9!=e.action&&17!=e.action&&(o=p()),o||($("#common_moda_success_message").html(e.message),$("#common_modal").show()))},_=function(e){$("#popup-body").html(e)
try{$("#id_interested_in_studying_cta").select2({placeholder:"I am interested in studying"})}catch(e){console.log(e)}loadScript(staticURL+"js/select2.min.js",null,"select2-js"),Dynamic.loadCSS(staticURL+"select2/4.0.3/css/select2.min.css")},O=function(){for(index in u)$(u[index]).removeClass(d),$(u[index]).find("p").remove(".error")},T=function(e){var o,t,a,r,s,n,i,l,c=$("#id_name_cta"),d=$("#id_email_cta"),u=$("#id_phone_cta"),m=$("#id_stream_cta"),p=$("#id_pref_level_cta"),f=$("#id_pref_state_cta"),g=$("#id_state_cta"),_=$("#id_board_cta"),h=$("#id_interested_in_studying_cta")
return O(),o=x(c.val()),t=L(d.val()),a=I(u.val()),r=P(m.val()),s=P(p.val()),o||(c.after("<p class='error msg'>"+v+"</p>"),$("#form-group_name").addClass("error")),t||(d.after("<p class='error msg'>"+C+"</p>"),$("#form-group_email").addClass("error")),a||(u.after("<p class='error msg'>"+b+"</p>"),$("#form-group_phone").addClass("error")),console.log("stream",m.val()),r||(m.focus(),m.after("<p class='error msg'>"+w+"</p>"),$("#form-group_stream").addClass("error")),s||(o&&t&&a&&r&&p.focus(),p.after("<p class='error msg'>"+y+"</p>"),$("#form-group_pref_level").addClass("error")),n=!1,(n=null!=f.val()||P(g.val()))||(o&&t&&a&&r&&s&&g.focus(),g.after("<p class='error msg'>"+S+"</p>"),$("#form-group_state").addClass("error")),(i=P(_.val()))||(o&&t&&a&&r&&s&&n&&_.focus(),_.after("<p class='error msg'>"+k+"</p>"),$("#form-group_board").addClass("error")),l=!0,j(h)||(l=!1,h.after("<p class='error msg'>Please choose one</p>"),$("#interested_in_studying").addClass("error")),console.log(o,t,a,r,s,n,i,l),!!(o&&t&&a&&r&&s&&n&&i&&l)},D=function(e){$(".error.msg").html(""),$(".form-group").removeClass("error"),e.responseJSON.name&&($("#id_name_cta").after("<p class='error msg'>"+e.responseJSON.name+"</p>"),$("#form-group_name").addClass("error")),e.responseJSON.phone&&($("#id_phone_cta").after("<p class='error msg'>"+e.responseJSON.phone+"</p>"),$("#form-group_phone").addClass("error")),e.responseJSON.email&&($("#id_email_cta").after("<p class='error msg'>"+e.responseJSON.email+"</p>"),$("#form-group_email").addClass("error")),e.responseJSON.stream&&($("#id_stream_cta").after("<p class='error msg'>"+e.responseJSON.stream+"</p>"),$("#form-group_stream").addClass("error")),e.responseJSON.pref_level&&($("#id_pref_level_cta").after("<p class='error msg'>"+e.responseJSON.pref_level+"</p>"),$("#form-group_pref_level").addClass("error")),e.responseJSON.state&&($("#id_state_cta").after("<p class='error msg'>"+e.responseJSON.state+"</p>"),$("#form-group_state").addClass("error"))},N={1:function(e){},2:function(e){location.href=e.url},3:function(e){},4:function(e){},5:function(e){},6:function(e){},7:function(e){},8:function(e){},9:function(e){location.href=e.url},10:function(e){e.is_prospectus_exists&&(location.href=e.url)},11:function(e){},12:function(e){},13:function(e){},14:function(e){},15:function(e){location.href=e.url},16:function(e){},17:function(e){window.location.href="/exam/exam-year-wise-sample-paper-downloader/"+sample_paper_id},18:function(e){return $.ajax({type:"GET",url:"/followup-form/preference-form/",success:function(e){$("#ajax_popup").hide(),$(".followUpcourse").show(),$(".followUpcourse").addClass("followUpdisplay"),$(".follow-form-1").removeClass("followupNone")},complete:function(e){options_res.push(e.responseJSON),exam_board_options(options_res),score_type_options(options_res)}}),!1},19:function(e){},20:A=function(e){},21:A},E=function(e){$.ajax({type:"POST",url:"/forms/get_form/",traditional:!0,data:e,beforeSend:function(){$(".loading").css("display","block")},success:function(e){_(e)},error:function(e){console.log("error in popup college")}}),J()},J=function(){"function"==typeof gtag_report&&gtag_report()},G=function(){"function"==typeof gtag_report_conversion&&gtag_report_conversion()},U={showForm:E,submit:function(e){if(!T())return!1
B(e)},validateSelect:function(e,o){h(e,o)},removeError:h=function(e,o){$(e).removeClass(d),$(e).find("p").remove(".error")},submitLead:B=function(e){"object"==typeof GeoLocation&&(e=GeoLocation.getUpdatedData(e)),$.ajax({type:"POST",url:"/common/api/v2/ctasubmission",data:e,success:function(e){f(e)},error:function(e,o,t,a){D(e)}})},isValidName:x=function(e){return n.test(e)},isValidEmail:L=function(e){return l.test(e)},isValidPhone:I=function(e){return c.test(e)},isValidNumber:P=function(e){return/^\d+$/.test(e)},nameMessage:v="Enter a valid name",emailMessage:C="Enter a valid email",phoneMessage:b="Enter 10 digit mobile no starting with 6,7,8,9",showFollowupForm:p=function(e){try{return Followup.show_form(),!0}catch(e){console.log(e)}return!1},getCTAID:function(){return s},setCTAID:function(e){s=e},isValidInterestedInStudying:j=function(e){return 0==e.length||0!=e.val().length}},this.CTA=U,$(document).on("click",".sample_paper_button_for_login",function(e){sample_paper_id=$(this).data("sample_paper_id")}),$(document).on("click",".apply_now_det_cd",function(e){var o,t,a,r,s,n,i,l,c,d,u,m
console.log("in my js"),e.preventDefault(),e.stopPropagation(),$("#popup-body").html(""),o=$(this).data("content_type"),t=$(this).data("object_id"),a=$(this).data("button_id"),r=$(this).data("cta_id"),s=$(this).data("app_label"),n=$(this).data("course_id"),i=$(this).data("pref_stream"),l=$(this).data("pref_level"),c=$(this).data("course_or_degree"),d=$(this).data("pref_course"),u=$(this).data("degree_id"),m=$(this).data("other_object_id"),$("#lead_form_popup, .subscribePopup").show(),data={content_type:o,object_id:t,button_id:a,cta_id:r,course_id:n,pref_level:l,pref_stream:i,course_or_degree:c,app_label:s,pref_course:d,degree_id:u,other_object_id:m},$(this).data("crs-redirection-url")&&(data["crs-redirection-url"]=$(this).data("crs-redirection-url")),U.showForm(data)}),$(document).on("submit","#cta-form-ajax",function(e){var o
console.log("cta form ajax inside"),e.preventDefault(),o=$(this).serialize()+"&csrfmiddlewaretoken="+$("#csrf_token").val(),console.log("form data is",o),U.submit(o)}),$(document).on("focus","#id_name_cta",function(e){U.removeError("#form-group_name",$(this))}),$(document).on("focus","#id_phone_cta",function(e){U.removeError("#form-group_phone",$(this))}),$(document).on("focus","#id_email_cta",function(e){U.removeError("#form-group_email",$(this))}),$(document).on("focusout","#id_email_cta",function(e){var o=document.getElementById("id_email_cta")
o.value=o.value.toLowerCase(),o.value=o.value.replace(/ +/g,"")}),$(document).on("focusout","#id_email_cta",function(e){var o=document.getElementById("id_email_cta")
o.value=o.value.toLowerCase(),o.value=o.value.replace(/ +/g,"")}),$(document).on("change","#id_pref_level_cta",function(e){U.validateSelect("#form-group_pref_level",$(this))}),$(document).on("change","#id_stream_cta",function(e){U.validateSelect("#form-group_stream",$(this))}),$(document).on("change","#id_state_cta",function(e){U.validateSelect("#form-group_state",$(this))}),$("#new_footer_form").submit(function(e){var o,t
if(e.preventDefault(),o=$(this).serialize(),t="/common/lead_create_ajax_stream/",fronted_validation_ok=a(),fronted_validation_ok)return"object"==typeof GeoLocation&&(o=GeoLocation.getUpdatedData(o)),$.ajax({type:"POST",url:t,data:o,success:function(e){"object"==typeof GeoLocation&&GeoLocation.updateUserID(e),CTA.setCTAID(null),$("#ajax_popup").html(),CTA.showFollowupForm()||($("#common_moda_success_message").text(e.message),$("#common_modal").show()),$("#new_footer_form .footer-form-li").find("select,input").val(""),$("#new_footer_form").find("input").trigger("onkeyup"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({response:"Success",event:"leadSubmission",created_lead_id:e.created_lead_id})},error:function(e){var o,t
for(o in window.dataLayer=window.dataLayer||[],window.dataLayer.push({response:"Failure",event:"leadSubmission",django_form_id:"",error_message:"",created_lead_id:"",new_lead_created:""}),$("span[class='message']").remove(),$("li.footer-form-li").removeClass("server-error"),e.responseJSON)t=$("#id_"+o),$(t).parents("li.footer-form-li").addClass("server-error"),0<t.siblings("span").length?t.siblings("span").html(e.responseJSON[o][0]):new_elem=t.after("<span class='message'>"+e.responseJSON[o][0]+"</span>")
$("span[class='message']").css("display","inline")}}),!1
console.log("else")}),g=function(e,o){0<e.siblings("span").length?e.siblings("span").show():e.after("<span class='message'>"+o+"</span>"),e.siblings("span").css("display","inline"),e.parents("li.footer-form-li").addClass("server-error")},a=function(){var e,o=$("#id_name"),t=$("#id_email"),a=$("#id_phone"),r=$("#id_stream"),s=$("#id_pref_level"),n=$("#id_pref_state"),i=$("#id_state"),l=$("#id_interested_in_studying"),c=CTA.isValidName(o.val()),d=CTA.isValidEmail(t.val()),u=CTA.isValidPhone(a.val()),m=CTA.isValidNumber(r.val()),p=CTA.isValidNumber(s.val()),f=CTA.isValidInterestedInStudying(l)
return console.log(f),c||g(o,CTA.nameMessage),d||g(t,CTA.emailMessage),u||g(a,CTA.phoneMessage),m||r.focus(),p||(c&&d&&u&&m&&s.focus(),g(s,"Add Preferred Level")),e=!1,(e=null!=n.val()||CTA.isValidNumber(i.val()))||(c&&d&&u&&m&&p&&i.focus(),g(s,"Please Choose State")),f||g(l,"Please Choose interested in studying"),console.log(c,d,u,m,p,e),!!(c&&d&&u&&m&&p&&e&&f)},$(document).on("focus",".footer-form-li input",function(e){$(this).siblings("span").hide(),$(this).parents("li.footer-form-li").removeClass("server-error")}),V=604800,M=function(e){startPos=e
var o={latitude:startPos.coords.latitude,longitude:startPos.coords.longitude,creation:Date.now()}
F=o,localStorage.setItem("position",JSON.stringify(o)),Z(),console.log(startPos.coords.latitude,startPos.coords.longitude)},q=function(e){var o={errorCode:e.code,creation:Date.now()}
F=o,localStorage.setItem("position",JSON.stringify(o)),Z(),console.log("Error occurred. Error code: "+e.code)},Z=function(){if(null===F&&Q(),null!==F){var e=K()
$.ajax({type:"POST",url:"/common/api/v2/position",data:e,success:function(e){},error:function(e,o,t,a){}})}},K=function(){var e,o,t={},a={}
for(e in t.latitude=z(),t.longitude=H(),t.errorcode=R(),t.user_id=Y(),t)(o=t[e])&&(a[e]=o)
return a},W=function(){var e,o,t
return null===F?null:(e=new Date(F.creation),o=new Date-e,t=Math.floor(o/1e3),console.log("seconds",t),t)},X=function(){var e=R()
return!!e&&1===e},ee=function(e){var o,t,a
if(Q(),o=[],t=K(),console.log(typeof e),"string"==typeof e){for(a in t)t.hasOwnProperty(a)&&o.push(a+"="+encodeURIComponent(t[a]))
e=e+"&"+o.join("&")}else for(a in t)e[a]=t[a]
return console.log("data",e),e},oe={getLocation:function(){var e,o
if(navigator.geolocation||console.log("geolocation not supported.."),e=W(),console.log("seconds",e),null!=e){if(!X())return
if(e<=V)return}o={timeout:5e3,maximumAge:1/0},navigator.geolocation.getCurrentPosition(M,q,o)},setUserPosition:Q=function(){var e=localStorage.getItem("position")
F=e?JSON.parse(e):null},getLatitude:z=function(){if(null===F)return null
var e=F.latitude
return void 0===e?null:e},getLongitude:H=function(){if(null===F)return null
var e=F.longitude
return void 0===e?null:e},getErrorCode:R=function(){if(null===F)return null
var e=F.errorCode
return void 0===e?null:e},updateUserID:function(e){"object"==typeof e&&void 0!==e.id&&localStorage.setItem("user_id",e.id)},getUserID:Y=function(){return localStorage.getItem("user_id")},getUpdatedData:ee},this.GeoLocation=oe,$(function(){"undefined"!=typeof IsAuthenticated&&IsAuthenticated||(oe.setUserPosition(),oe.getLocation())})}).call(this)
